(function(k){var l=window.AmazonUIPageJS||window.P,q=l._namespace||l.attributeErrors,n=q?q("MarsContentGridAssets",""):l;n.guardFatal?n.guardFatal(k)(n,window):n.execute(function(){k(n,window)})})(function(k,l,q){function n(d,c,b){b||(b=c,c=d,d=[]);var g=l.AmazonUIPageJS||l.P||k;g.now(c).execute("Registrant",function(e){if(!e)try{g.when.apply(g,d).register(c,b)}catch(a){g.log("ContentGridModuleRegistration error: "+a,"WARN")}})}k.when("ContentGridModuleRegistration").execute("content-grid-controller.js",
function(d){d.safeRegister(["A","videojs","MarsContentGridAccessibilityProcessor"],"MarsContentGridController",function(c,b,g){return c.createClass({init:function(b,a){this._model=b;this._view=a;this._model.setVideoInstance(this._initVideoPlayer());this._model.getHidePlayButton()&&this._hidePlayButton();this._model.isAutoplay()&&this._bindEvents();var f=this;this._model.getVideoInstance().on("ready",function(){g.getInstance().requestProcessVideoJsMarkup(f._view.getParentContainer())})},_bindEvents:function(){this._bindAutoplayPause();
this._bindAutoplayFullscreen();this._bindOnClick();this._bindAutoplayStart()},_initVideoPlayer:function(){var e=this._model.getVideoURL(),a=/\.[0-9a-z]+$/i;"string"!==typeof e||a.test(e)||(e+=".mp4");var a=this._model.getParentID(),f=this._model.getVideoID(),h=document.createElement("video");h.type="video/mp4";h.id=f;h.setAttribute("webkit-playsinline","webkit-playsinline");h.setAttribute("playsinline","playsinline");document.getElementById(a).appendChild(h);a=b(h);a.src(e);a.controls(!0);a.addClass("video-js");
a.addClass("content-grid-video");a.addClass("vjs-big-play-button");a.addClass("vjs-big-play-centered");a.addClass("mako-cg-poster");a.poster(this._model.getPosterURL());return a},_bindAutoplayPause:function(){var b=this;this._model.getVideoInstance().onpause=function(){b._view.isVideoInViewport()&&b._model.setCustomerClickedVideo(!0)}},_bindAutoplayStart:function(){var b=this._model.getVideoInstance(),a=c.$;b.muted(!0);this._playPauseVideoInViewport();c.on.scroll(a.proxy(this._playPauseVideoInViewport,
this))},_bindAutoplayFullscreen:function(){var b=this;this._model.getVideoInstance().onfullscreenchange=function(){b._model.setCustomerClickedVideo(!0)}},_playPauseVideoInViewport:function(){var b=this._model.getVideoInstance();this._model.getCustomerClickedVideo()||(this._view.isVideoInViewport()?b.paused()&&b.play():b.paused()||b.pause())},_bindOnClick:function(){var b=this;this._model.getVideoInstance().on("click",function(){b._model.setCustomerClickedVideo(!0)})},_hidePlayButton:function(){var b=
this._model.getVideoInstance();b.addClass("hide-big-play-button");b.addClass("mako-cg-play-button")},destroy:function(){this._view=this._model=null}})})});"use strict";k.when("ContentGridModuleRegistration").execute("content-grid-factory.js",function(d){d.safeRegister(["A","MarsContentGridModel","MarsContentGridView","ready"],"MarsContentGridFactory",function(c,b,g){var e=[];return{getVideo:function(a){k.when("MarsContentGridController").execute("content-grid-video-factory",function(f){f=new f(new b(a),
new g(a));e.push(f)});try{k.declare("mako-videojs-registered")}catch(f){k.log("Failed to declare mako-videojs-registered: "+f,"WARN")}},destroyAll:function(){e.forEach(function(a){a.destroy()});e=[]}}})});"use strict";k.when("ContentGridModuleRegistration").execute("content-grid-interstitial.js",function(d){d.safeRegister(["A","MakoCommonCartHelper","a-modal","marsRefTagUtils","ExtraDataHelper"],"MarsContentGridInterstitial",function(c,b,g,e,a){var f=c.$,h,d=c.createClass({create:function(a,b,f,h){this.interstitialName=
a;this.clientName=b;this.isMobile=h;this.header=f;this.baseReftag="MarsContentGrid_"+a;this._bindEvents()},_bindEvents:function(){f('input#add-to-cart-button[name\x3d"submit.add-to-cart"]').bind("click",f.proxy(this._handleAtcEvent,this,"form#addToCart",'input#add-to-cart-button[name\x3d"submit.add-to-cart"]'));f('input#installments-button[name\x3d"submit.installments"]').bind("click",f.proxy(this._handleAtcEvent,this,"form#addToCart",'input#installments-button[name\x3d"submit.installments"]'));f('input#buy-now-button[name\x3d"submit.buy-now"]').bind("click",
f.proxy(this._handleAtcEvent,this,"form#addToCart",'input#buy-now-button[name\x3d"submit.buy-now"]'));f('input#buy-now-button[type\x3d"submit"]').bind("click",f.proxy(this._handleAtcEvent,this,"form#buyNow",'input#buy-now-button[type\x3d"submit"]'))},_handleAtcEvent:function(a,h,c){try{var g=this;c.preventDefault();var e=f(a),d=f('#buybox select[name\x3d"quantity"]').val(),p,m,r;"form#buyNow"===a?(f("form#buyNowCheckout").length&&(e=f("form#buyNowCheckout")),p=e.find('input[type\x3d"hidden"][name\x3d"asin"]').val(),
m=e.find('input[type\x3d"hidden"][name\x3d"offeringID"]').val(),r=e.find('input[type\x3d"hidden"][name\x3d"sessionID"]').val()):this.isMobile?('input#installments-button[name\x3d"submit.installments"]'===h&&(e=f("form#mobile-installments")),r=e.find('input[type\x3d"hidden"][name\x3d"verificationSessionID"]').val(),p=e.find('input[type\x3d"hidden"][name\x3d"a"]').val(),m=e.find('input[type\x3d"hidden"][name\x3d"oid"]').val()):(p=e.find(h).val(),m=e.find('input[type\x3d"hidden"][name\x3d"offerListingID"]').val(),
r=e.find('input[type\x3d"hidden"][name\x3d"session-id"]').val());var u=f(h).closest('.a-declarative[data-action\x3d"aw-mash"]');if(u&&u.length){var v=u.data("awMash");r=v.inputs.verificationSessionID;p=v.inputs.a;m=v.inputs.oid;d=v.inputs.quantity}var n=b.createRequest(r,this.clientName),q=g._handleInstallmentandGifting(0,!1),q=g._handlePreRegistration(e,u,0,q);n.setAdditionalData(q);n.addAsinData(p,m,d).setReftag(this.baseReftag+"_ATC");n.sendRequest().done(function(a){g._showInterstitial()}).fail(function(a){k.log("An error has occurred with common cart handler with: "+
a+" for asin: "+p+", offerListingId: "+m+", quantity: "+d,"FATAL","MarsContentGridAssets");l.ue&&l.ue.count("MarsContentGrid_Interstitial_CartRequestError",1)})}catch(w){l.ue&&l.ue.count("MarsContentGrid_Interstitial_HandleATCError",1)}},_showInterstitial:function(){var a={dataStrategy:"preload",name:this.interstitialName,header:this.header},b="#"+this._getCamelCaseFromSnakeCase(this.interstitialName),h=this.baseReftag+"_InterstitialOpened";if(this.isMobile)k.when("a-secondary-view").execute(function(c){var g=
c.get(this.interstitialName);g||(g=c.create(f(b),a));g.show();e.send(h)});else{var c=g.get(this.interstitialName);c||(c=g.create(f(b),a));c.show();e.send(h)}},_getCamelCaseFromSnakeCase:function(a){return a.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()})},_handlePreRegistration:function(b,f,h,c){try{var g;if(f.length){var e=f.data("action");if(e){var d=f.data(e);d&&d.inputs&&(g=a.getObjectExtraData(d.inputs))}}else b.length&&(g=a.getFormExtraData(b[0]));g&&a.setObjectExtraData(c,g,h)}catch(l){k.log("Pre Registration UATC custom param inclusion failed: "+
l)}return c},_handleInstallmentandGifting:function(a,b){var c={};b&&(b=f("#installments-programId"))&&b.val()&&(c["isInstallmentsSelected."+a]=1,c["installments-programId."+a]=b.val(),c["installmentsProgram."+a]=b.val());if(f("#gift-wrap").is(":checked"))for(b=0;b<=a;b++)c["isToBeGiftWrapped."+b]="true";return c}});return{getInstance:function(){h||(h=new d);return h}}})});"use strict";k.when("ContentGridModuleRegistration").execute("content-grid-model.js",function(d){d.safeRegister(["A"],"MarsContentGridModel",
function(c){return c.createClass({init:function(b){this._videoURL=b.URL;this._videoID=b.ID;this._autoplay="string"===typeof b.autoplay?"true"===b.autoplay:b.autoplay;this._hidePlayButton="string"===typeof b.hidePlayButton?"true"===b.hidePlayButton:b.hidePlayButton;this._customerClickedVideo=!1;this._posterURL=b.posterURL;this._parentID=b.parentID},getVideoInstance:function(){return this._videoInstance},getSWFURL:function(){return SWF_URL},getVideoURL:function(){return this._videoURL},getVideoID:function(){return this._videoID},
getHidePlayButton:function(){return this._hidePlayButton},getCustomerClickedVideo:function(){return this._customerClickedVideo},getPosterURL:function(){return this._posterURL},getParentID:function(){return this._parentID},isAutoplay:function(){return this._autoplay},setVideoInstance:function(b){this._videoInstance=b},setCustomerClickedVideo:function(b){this._customerClickedVideo=b}})})});"use strict";k.when("ContentGridModuleRegistration").execute("content-grid-view.js",function(d){d.safeRegister(["A"],
"MarsContentGridView",function(c){var b=c.$;return c.createClass({init:function(b){this._parentContainer=document.getElementById(b.parentID)},getParentContainer:function(){return this._parentContainer},isVideoInViewport:function(){try{var c=this.getParentContainer();if(c&&c.getBoundingClientRect){var e=b(l),a=this.getParentContainer().getBoundingClientRect();return 0<a.bottom&&0<a.right&&a.top<e.height()&&a.left<e.width()}}catch(f){}return!1}})})});k.when("ContentGridModuleRegistration").execute("content-grid-modal.js",
function(d){d.safeRegister(["A","marsRefTagUtils"],"MarsContentGridModal",function(c,b){var g,e=c.createClass({create:function(a,f,h,e,g,d,l,n,q){var t=c.$,t=t("#"+f.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()})),p=t.parent();h||(h=f);var m={name:h};d&&(m.dataStrategy="ajax",m.url=d,m.ajaxFailMsg=l,m.manualRefresh=n,m.withCredentials=q,c.off("a:popover:ajaxContentLoaded:"+h,this._onAjaxContentLoaded),c.off("a:popover:ajaxFail:"+h,this._onAjaxFailed),c.on("a:popover:ajaxContentLoaded:"+
h,this._onAjaxContentLoaded),c.on("a:popover:ajaxFail:"+h,this._onAjaxFailed));g?(c.capabilities.isAmazonApp&&(m.hideHeader=!0),k.when("a-secondary-view").execute(function(a){if(d){var b=a.get(h);b&&p.data("a-popover-id",b.id);a.create(p,m)}else p.attr("data-a-secondary-view",JSON.stringify(m))})):k.when("a-modal").execute(function(a){m.header=e;m.width="750";if(d){var b=a.get(h);b&&p.data("a-popover-id",b.id);a.create(p,m)}else p.attr("data-a-modal",JSON.stringify(m))});t.one("click",function(){b.send("mars_content_grid_"+
h+"_"+a)})},_onAjaxContentLoaded:function(a){l.ue&&l.ue.count("MarsContentGrid_Modal_GetRemoteContentRequest",1)},_onAjaxFailed:function(a){l.ue&&(l.ue.count("MarsContentGrid_Modal_GetRemoteContentRequest",1),l.ue.count("MarsContentGrid_Modal_GetRemoteContentError",1));k.log("Get remote content failed in modal: "+a.popover.name+", remoteContentURL: "+a.popover.url,"FATAL","MarsContentGridAssets")}});return{getInstance:function(){g||(g=new e);return g}}})});"use strict";k.when("ContentGridModuleRegistration").execute("hi-res-image-lazy-loading.js",
function(d){d.safeRegister(["A"],"MarsContentGridImageLoader",function(c){return{load:function(b){c.loadHiResImage(b);b.classList.remove("content-grid-image-lazy-loading")}}})});"use strict";k.when("ContentGridModuleRegistration").execute("content-grid-accessibility-processor.js",function(d){d.safeRegister(["A"],"MarsContentGridAccessibilityProcessor",function(c){var b=c.$,g,e=c.createClass({init:function(){this.hasPageLoaded="complete"===document.readyState||!1;this.doProcessMarkup=!1;this.videoJsContainers=
[];this.hasPageLoaded||this._bindPageReadyEvents()},requestProcessMarkup:function(){this.hasPageLoaded?this._processLinksForAriaLabel():this.doProcessMarkup=!0},requestProcessVideoJsMarkup:function(a){!a||!a instanceof b||!a instanceof HTMLElement||(a instanceof HTMLElement&&(a=b(a)),this.hasPageLoaded?this._processVideoJsMarkup(a):this.videoJsContainers.push(a))},_bindPageReadyEvents:function(){var a=this;k.when("ready").execute(function(){a.hasPageLoaded=!0;a.doProcessMarkup&&a._processLinksForAriaLabel();
if(a.videoJsContainers.length){for(var b=0;b<a.videoJsContainers.length;b++)a._processVideoJsMarkup(a.videoJsContainers[b]);a.videoJsContainers=[]}})},_processLinksForAriaLabel:function(){b(".content-grid-row-wrapper").find("a[title]").each(function(a,c){a=b(c);a.attr("aria-label")||a.attr("aria-label",a.attr("title"))})},_processVideoJsMarkup:function(a){b(a).find("button.vjs-menu-button[title]").each(function(a,c){c=b(c);a=c.attr("title");c.attr("aria-label")||c.attr("aria-label",a);c=c.parent().find(".vjs-menu-content");
c.attr("aria-label")||c.attr("aria-label",a)})}});return{getInstance:function(){g||(g=new e);return g}}})});"use strict";k.when("ContentGridModuleRegistration").execute("marsRefTagUtils.js",function(d){d.safeRegister(["A"],"marsRefTagUtils",function(c){var b=c.$;return{send:function(c,e){if(!c)throw Error("refTag is not defined");b.get((e||"/hctp/log/refMarker")+"?ref_\x3d"+c)}}})});"use strict";k.when("ContentGridModuleRegistration").execute("mako-vse-light-player.js",function(d){d.safeRegister(["A",
"Mako.VSEHelper","VSEPlayerIntegrationWithMako"],"Mako.IVSELightPlayer",function(c,b,g){var e=["videoUrl"];return{render:function(a,f){if("undefined"===typeof f)throw"Argument required: playerParentId";for(var d=0;d<e.length;d++){var k=e[d];if(!c.$.trim(a[k]))throw"Argument required: options."+k;}a={video:{videoURL:a.videoUrl,imageURL:a.imageUrl},locale:a.locale||b.getLocale(),marketplaceID:a.marketplaceID||b.getMarketplaceId(),page:a.pageType||b.getPageType(),placement:a.placement||"placement_"+
f,requester:"Mako",clientPrefix:"mako"+f};g.render(a,f,b.getVideoComponentEndpointHost())}}});d.safeRegister(["A"],"VSEPlayerIntegrationWithMako",function(c){return{render:function(b,d,e){c.ajax(e+"/vap/ew/subcomponent/vseplayer",{params:b,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",withCredential:!0,timeout:4E3,success:function(a){var b=c.$("#"+d);if(1===b.length)b.html(a);else throw["Did not find the appropriate number of video parent elements.","Expecting 1; found: "+
b.length,"Possible reasons: - conflicting players with non-unique ids\n - id name is not formatted correctly\n - parent element was removed or is not available (possibly race condition)"].join("\n");},error:function(a){throw"Error calling VSE player endpoint. "+("string"===typeof a)?a:"";}})}}});d.safeRegister(["A"],"Mako.VSEHelper",function(c){var b=l.opt||{};return{getMarketplaceId:function(){return b.obfuscatedMarketId||"ATVPDKIKX0DER"},getLocale:function(){return b.language||"en_US"},getPageType:function(){return b.pageType||
"Unknown"},getVideoComponentEndpointHost:function(){var b=l.location.host,c="https://www.amazon.com";0<=b.indexOf(".amazon.")&&(c="https://"+b);return c}}})});n([],"ContentGridModuleRegistration",function(){return{safeRegister:n}});"use strict";k.when("ContentGridModuleRegistration").execute("mars-content-grid-link-helper.js",function(d){d.safeRegister(["A","marsRefTagUtils"],"contentGridLinkHelper",function(c,b){var d=c.$;return{linkEventBinder:function(c){return{$selector:d("#"+c),bindSendRefTagEvent:function(a,
c,d,e){this.$selector.live("click",function(){"true"===d?b.send(a+"_"+c,e):b.send(a,e)});return this},bindSmoothScrollAnimation:function(a){/^#/.test(a)&&this.$selector.live("click",function(b){b=d(a).offset().top;if(l.history.pushState)l.history.pushState(null,null,a);else{var c=d(a),e=c.attr("id");c.removeAttr("id");l.location.hash=a;c.attr("id",e)}d("html, body").stop().animate({scrollTop:b},500)});return this},clearEvents:function(){this.$selector.die();return this}}}}})})});